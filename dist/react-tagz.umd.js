!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactTagz={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r,a=n(t);!function(e){e[e.INLINE=0]="INLINE",e[e.LIST_MODE=1]="LIST_MODE"}(r||(r={}));var o=function(e){var t={exports:{}};return e(t,t.exports),t.exports}((function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=arguments,r=[],a=0;a<arguments.length;a++){var o=e[a];if(o){var i=typeof o;if("string"===i||"number"===i)r.push(o);else if(Array.isArray(o)&&o.length){var l=n.apply(null,o);l&&r.push(l)}else if("object"===i)for(var s in o)t.call(o,s)&&o[s]&&r.push(s)}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()})),i=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.default.createElement("polyline",{points:"20 6 9 17 4 12"}))},l=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.default.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.default.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},s=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.default.createElement("polyline",{points:"3 6 5 6 21 6"}),a.default.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}))},u=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.default.createElement("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}))};function c(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}c(".suggestions-wrapper{background:#fff;border-radius:4px;filter:drop-shadow(0 0 10px rgba(0,0,0,.3));left:50%;margin-top:1rem;padding:.5rem;position:absolute;top:100%;transform:translateX(-50%);width:100%}.suggestions{list-style:none;margin:0;padding:0;width:100%;overflow-y:auto;max-height:350px;min-height:100px}.suggestions::-webkit-scrollbar{width:5px}.suggestions::-webkit-scrollbar-track{background:#f5f5f5}.suggestions::-webkit-scrollbar-thumb{background-color:#494949;border-radius:10px}.suggestion{align-items:center;align-self:flex-start;border-radius:4px;cursor:pointer;display:flex;font-size:.8rem;margin:.5rem 0;user-select:none}.suggestion.selected{background:#f5f5f5}.suggestion.disabled{filter:opacity(.4) grayscale(90%);pointer-events:none}.suggestion:hover{background:#f8de7e}.suggestion.list{text-align:left;width:98%}.suggest-text{font-size:.8rem}.check-icon-wrapper{border-radius:50%;height:1rem;margin-left:auto;margin-right:.5rem;width:1rem}.close-button{align-items:center;background:#494949;border:0;color:#f8de7e;cursor:pointer;display:flex;height:1.5rem;margin-left:auto;padding:0;width:1.5rem}.sug-header{display:flex;margin-bottom:.5rem;padding:.2rem}.status-label{align-items:center;display:flex;font-size:.85rem;font-weight:700}");var d=function(e){var n=e.items,s=e.mode,u=e.exclude,c=e.onSelection,d=e.onDelete,f=e.onCloseSuggestion,m=e.disableInput,g=t.useState(n.map((function(e){return{value:e,selected:!1}}))),p=g[0],h=g[1];t.useEffect((function(){u&&h(p.map((function(e){return Object.assign({},e,{selected:u.indexOf(e.value)>-1})})))}),[null==u?void 0:u.length]);var v=t.useMemo((function(){return`${p.filter((function(e){return e.selected})).length} out of ${p.length} selected`}),[JSON.stringify(p)]);return p.length?a.default.createElement("div",{className:"suggestions-wrapper"},a.default.createElement("span",{className:"sug-header"},a.default.createElement("span",{className:"status-label"},v),a.default.createElement("button",{onClick:f,className:"close-button"},a.default.createElement(l,null))),a.default.createElement("ul",{className:"suggestions"},p.map((function(e,t){return a.default.createElement("li",{key:t,onClick:function(){e.selected?d(e.value):c(e.value)},className:o({suggestion:!0,disabled:!e.selected&&m,selected:e.selected,list:s===r.LIST_MODE})},a.default.createElement("span",{style:{paddingLeft:"1rem"},className:"suggestion"},e.value),e.selected&&a.default.createElement("span",{className:"check-icon-wrapper"},a.default.createElement(i,null)))})))):null};c(".nav-bar-wrapper{align-items:center;display:flex;margin-top:1rem;padding:.2rem 0;width:100%}.nav-bar-controls{align-items:center;display:flex;justify-content:flex-end;margin:0;padding:0;width:30%}.nav-bar-message{font-size:.75rem;font-style:italic;font-weight:500;max-width:65%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.nav-bar-control{align-items:center;background:none;border:0;cursor:pointer;display:flex;height:1rem;justify-content:center;margin:0 .25rem;width:1rem;filter:opacity(var(--control-opacity));pointer-events:var(--pointer-events)}");var f=a.default.memo((function(e){var n=e.message,r=e.onClear,o=e.onShowSuggestions,i=e.disableTrash,l=t.useMemo((function(){return i?{"--control-opacity":.5,"--pointer-events":"none"}:{}}),[i]);return a.default.createElement("nav",{className:"nav-bar-wrapper"},a.default.createElement("span",{className:"nav-bar-message"},n),a.default.createElement("ul",{className:"nav-bar-controls"},a.default.createElement("li",{onClick:r,className:"nav-bar-control",style:l},a.default.createElement(s,null)),a.default.createElement("li",{onClick:o,className:"nav-bar-control"},a.default.createElement(u,null))))}),(function(e,t){return e.message===t.message&&e.disableTrash===t.disableTrash}));c(".edit-txt-wrapper{display:flex;align-items:center;justify-content:flex-start;outline:0;padding-left:.2rem}@keyframes blink{0%,to{background:#000}50%{background:transparent}}.edit-text{user-select:none;min-width:5px;font-size:.85rem;order:1;min-width:4px;padding:.25rem .2rem .25rem .1rem}.blink,.edit-text{align-items:center;display:flex}.blink{animation:blink;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:step-end;font-size:1rem;font-weight:500;text-align:left;justify-content:flex-start;width:1px;height:18px;margin-left:1px;order:var(--blink-order);visibility:var(--blink-visibility)}.char{order:var(--char-order)}.char-wrapper{align-items:center;display:flex}");var m=function(e){var n=e.hasFocus,r=e.order,o=t.useMemo((function(){return{"--blink-visibility":n?"visibility":"hidden","--blink-order":r}}),[n,r]);return a.default.createElement("span",{className:"blink",style:o})};c(".placeholder-wrapper{order:2}.placeholder-wrapper:hover{cursor:text}.placeholder{font-style:italic;font-size:.85rem;opacity:.65}");var g=function(e){return a.default.createElement("div",{onClick:e.onClick,onBlur:e.onBlr,className:"placeholder-wrapper"},a.default.createElement("span",{className:"placeholder"},e.value),e.children)},p=a.default.forwardRef((function(e,n){var r=e.value,o=e.onSaveEdit,i=e.cursorSize;void 0===i&&(i="SMALL");var l=e.onEditStatusChanged,s=e.placeholder;void 0===s&&(s="Enter a value...");var u=e.mode,c=e.editable;void 0===c&&(c=!1);var d=e.maxLength;void 0===d&&(d=20);var f=t.useState(r),p=f[0],h=f[1],v=t.useState(!1),b=v[0],w=v[1],x=t.useState(),y=x[0],E=x[1],k=t.useCallback((function(){!y&&c&&E(!0)}),[y]),S=t.useCallback((function(){E(!1)}),[b,p]),C=t.useState(r.length-1),N=C[0],M=C[1],I=t.useRef(!0),T=t.useRef(!1),j=t.useCallback((function(e){var t=e.key,n=p.length;if(e.ctrlKey&&"a"===t)w(!0);else if(1===t.length&&n<d){b&&(h(""),b&&w(!1));var r=" "===t?String.fromCharCode(160):t;I.current?h((function(e){return`${e}${r}`})):(h((function(e){var t=[].concat(e);return t.splice(N+1,0,r),t.join("")})),M(N+1))}else switch(t){case"Enter":p&&(o&&o(p.trim()),l(!1),"INPUT"===u&&h(""));break;case"Escape":E(!1),b&&w(!1),l(!1);break;case"Backspace":b?h(""):(h((function(e){return[].concat(e).filter((function(e,t){return t!==N})).join("")})),N>=0&&M(N-1));break;case"Home":case"End":M("Home"===t?-1:n-1),I.current="Home"===t,T.current="Home"===t,b&&w(!1);break;case"ArrowLeft":case"ArrowRight":"ArrowLeft"===t&&N>=0?M(N-1):"ArrowRight"===t&&N<n-1&&M(N+1),N>0&&N<n?(T.current=!1,I.current=!1):(T.current=!0,I.current=!1),b&&w(!1);break;case"Delete":b?h(""):n&&N<n&&h((function(e){return[].concat(e).filter((function(e,t){return t!==N+1})).join("")}))}}),[p,y,b,N]);t.useEffect((function(){null!=y&&(y?l(!0):(l(!1),w(!1),M(p.length-1)))}),[y]),t.useEffect((function(){p.length?I.current&&M(p.length-1):(w(!1),M(-1))}),[p]);var L=t.useMemo((function(){return N<0?"front":(p.length,"back")}),[N,p]),O=t.useMemo((function(){return N<0||y?a.default.createElement(m,{hasFocus:y,selectAll:b,cursorSize:i,order:0}):null}),[y,b,N,p]),z=t.useMemo((function(){return b?{background:"#ccc",color:"#000"}:{background:"transparent"}}),[b]),D=t.useMemo((function(){return{order:"front"===L?2:1}}),[L]);return a.default.createElement("div",{className:"edit-txt-wrapper",onBlur:S,onKeyDown:j,tabIndex:0,onFocus:k,ref:n},"INPUT"===u&&!p.length&&a.default.createElement(g,{value:s,onClick:k,onBlr:S}),a.default.createElement("span",{className:"edit-text",style:z},N<0&&O,[].concat(p).map((function(e,t){return a.default.createElement("span",{key:t,className:"char-wrapper"},a.default.createElement("span",{style:D},e),t===N&&a.default.createElement(m,{hasFocus:y,selectAll:b,cursorSize:i,order:t+1}))}))))}));c("@keyframes animate-blink{0%,to{color:transparent}50%{color:#000}}.tag,.tag-content-wrapper{align-items:center;display:flex}.tag{background:var(--tag-bg-color);border-radius:4px;border:1px solid var(--tag-border-color);font-size:1rem;margin:.25rem;outline:0;padding:.25rem}.close-icon-wrapper{align-items:center;background:#494949;border-radius:50%;color:#fff;cursor:pointer;display:flex;height:1rem;justify-content:center;margin-left:auto;margin-right:.25rem;width:1rem}");var h=function(e){var n=e.name,r=e.id,o=e.onDelete,i=e.readOnly,s=(e.hide,e.onSaveEdit),u=t.useCallback((function(e){r&&s&&s(r,e)}),[]),c=t.useState(!1),d=c[0],f=c[1],m=t.useCallback((function(e){f(e),e?g.current&&g.current.focus():g.current&&g.current.blur()}),[]),g=t.useRef(null),h=t.useMemo((function(){return{"--tag-bg-color":d?"#FFF":"rgba(248,222,126,1.0)","--tag-border-color":d?"#494949":"transparent"}}),[d]);return a.default.createElement("li",{className:"tag",style:h,tabIndex:0},a.default.createElement("div",null,a.default.createElement(p,{value:n,onSaveEdit:u,onEditStatusChanged:m,ref:g,mode:"EDIT",editable:!i})),!i&&a.default.createElement("span",{onClick:function(){return r&&o&&o(r)},tabIndex:0,className:"close-icon-wrapper"},a.default.createElement(l,null)))};c(".tags-input-wrapper{align-self:center;margin-bottom:.5rem;margin-top:.5rem}");var v=function(e){var t=e.onInput,n=e.inputRef,r=e.onStatusChange;return a.default.createElement("div",{className:"tags-input-wrapper"},a.default.createElement(p,{value:"",onSaveEdit:function(e){t(e)},onEditStatusChanged:r,showCursor:!0,ref:n,mode:"INPUT",editable:!0}))};c(".tags-wrapper{background:#f5f5f5;border-radius:4px;box-shadow:inset 0 0 10px rgba(0,0,0,.1);display:flex;flex-wrap:wrap;list-style:none;margin:0;padding:1rem 1rem .5rem;position:relative;transition:height .3s ease-out;user-select:none;width:450px}");var b=function(e){var t=e.disableInput,n=e.inputRef,r=e.items,o=e.onClearTags,i=e.onDelete,l=e.onInput,s=e.onSaveEdit,u=e.onToggleSuggestions,c=e.readOnly,d=e.validationMessage,m=e.onInputStatusChanged;return a.default.createElement("ul",{className:"tags-wrapper"},r.map((function(e){return a.default.createElement(h,Object.assign({},e,{key:e.id,onDelete:i,onSaveEdit:s}))})),!t&&a.default.createElement(v,{onInput:l,inputRef:n,onStatusChange:m}),!c&&a.default.createElement(f,{onShowSuggestions:u,message:d,onClear:o,disableTrash:!r.length}))};c(".main-wrapper{display:flex;flex-direction:column;position:relative;transition:max-height .5s cubic-bezier(0,1,0,1);max-height:600px}svg{width:100%;height:100%}");e.ReactTagz=function(e){var n=e.items,o=e.maxTags;void 0===o&&(o=5);var i=e.allowDuplicates;void 0===i&&(i=!1);var l=e.allowParsing;void 0===l&&(l={delimiter:","});var s=e.readOnly;void 0===s&&(s=!1);var u=e.suggestions;void 0===u&&(u=[]);var c=e.suggestionMode;void 0===c&&(c=r.LIST_MODE);var f=e.placeholder;void 0===f&&(f="Choose an option ...");var m=t.useState([]),g=m[0],p=m[1],h=t.useState(""),v=h[0],w=h[1],x=t.useState([]),y=x[0],E=x[1],k=t.useState(!1),S=k[0],C=k[1],N=t.useState(f),M=N[0],I=N[1],T=t.useRef(null),j=t.useMemo((function(){return g.length===o}),[g.length]),L=t.useMemo((function(){return!i&&g.some((function(e){return e.name===v}))}),[v,g.length]),O=t.useMemo((function(){return j||s}),[j,s]),z=t.useMemo((function(){return!j&&!L}),[j,L]),D=t.useCallback((function(e){return w(e)}),[]),R=t.useCallback((function(e){var t=g.find((function(t){return t.id===e}));p((function(t){return t.filter((function(t){return t.id!==e}))})),t&&E((function(e){return e.filter((function(e){return e!==t.name}))})),I(f),T.current&&T.current.focus()}),[g.length]),B=t.useCallback((function(){return C(!S)}),[S]),A=t.useMemo((function(){return S&&!s}),[S,s]),F=t.useCallback((function(){p([]),E([]),I(f),T.current&&T.current.focus()}),[]),P=t.useCallback((function(e,t){var n=g.find((function(t){return t.id===e}));u.indexOf(t)>-1&&y.every((function(e){return e!==t}))&&E((function(e){return e.concat(t)})),n&&u.some((function(e){return e===n.name}))&&y.some((function(e){return e===n.name}))&&E((function(e){return e.filter((function(e){return e!==n.name}))})),p((function(n){return n.map((function(n){return n.id===e?Object.assign({},n,{name:t,value:t}):n}))})),T.current&&T.current.focus()}),[y]),_=t.useCallback((function(e){E((function(t){return null==t?void 0:t.concat(e)})),w(e)}),[]),H=t.useCallback((function(e){T.current&&e&&T.current.focus()}),[]);return t.useEffect((function(){j?I("You have reached the maximum tags allowed."):L&&I("You already have that tag.")}),[j,L]),t.useEffect((function(){if(z&&v){var e=v.split(l.delimiter).slice(0,Math.max(0,o-g.length)).map((function(e){return{name:e,value:e,id:Math.random().toString(16).slice(2),order:g.length+1}}));p((function(t){return t.concat(e)})),I(""),u.some((function(e){return e===v}))&&E((function(e){return e.concat(v)}))}v&&w("")}),[v]),t.useEffect((function(){var e;e=n.map((function(e,t){return Object.assign({},e,{id:Math.random().toString(16).slice(2),readOnly:s,order:t})})).slice(0,o),p(e),E(n.map((function(e){return e.name})))}),[]),a.default.createElement("div",{className:"main-wrapper"},a.default.createElement(b,{disableInput:O,inputRef:T,items:g,onClearTags:F,onDelete:R,onInput:D,onSaveEdit:P,onToggleSuggestions:B,readOnly:s,validationMessage:M,onInputStatusChanged:H}),A&&a.default.createElement(d,{disableInput:O,exclude:y,items:u,mode:c,onCloseSuggestion:B,onDelete:function(e){var t=g.find((function(t){return t.name===e}));null!=t&&t.id&&R(t.id)},onSelection:_}))},Object.defineProperty(e,"__esModule",{value:!0})}));

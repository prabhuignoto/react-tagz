import e,{useState as t,useEffect as n,useMemo as r,useCallback as a,useRef as i}from"react";var o;!function(e){e[e.INLINE=0]="INLINE",e[e.LIST_MODE=1]="LIST_MODE"}(o||(o={}));var l,s=(function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=arguments,r=[],a=0;a<arguments.length;a++){var i=e[a];if(i){var o=typeof i;if("string"===o||"number"===o)r.push(i);else if(Array.isArray(i)&&i.length){var l=n.apply(null,i);l&&r.push(l)}else if("object"===o)for(var s in i)t.call(i,s)&&i[s]&&r.push(s)}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(l={exports:{}},l.exports),l.exports),c=function(){return e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("polyline",{points:"20 6 9 17 4 12"}))},u=function(){return e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},d=function(){return e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("polyline",{points:"3 6 5 6 21 6"}),e.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}))},m=function(){return e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}))};function f(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}f(".suggestions-wrapper{background:#fff;border-radius:4px;filter:drop-shadow(0 0 10px rgba(0,0,0,.3));left:50%;margin-top:1rem;padding:.5rem;position:absolute;top:100%;transform:translateX(-50%);width:100%}.suggestions{list-style:none;margin:0;padding:0;width:100%;overflow-y:auto;max-height:350px;min-height:100px}.suggestions::-webkit-scrollbar{width:5px}.suggestions::-webkit-scrollbar-track{background:#f5f5f5}.suggestions::-webkit-scrollbar-thumb{background-color:#494949;border-radius:10px}.suggestion{align-items:center;align-self:flex-start;border-radius:4px;cursor:pointer;display:flex;font-size:.8rem;margin:.5rem 0;user-select:none}.suggestion.selected{background:#f5f5f5}.suggestion.disabled{filter:opacity(.4) grayscale(90%);pointer-events:none}.suggestion:hover{background:#f8de7e}.suggestion.list{text-align:left;width:98%}.suggest-text{font-size:.8rem}.check-icon-wrapper{border-radius:50%;height:1rem;margin-left:auto;margin-right:.5rem;width:1rem}.close-button{align-items:center;background:#494949;border:0;color:#f8de7e;cursor:pointer;display:flex;height:1.5rem;margin-left:auto;padding:0;width:1.5rem}.sug-header{display:flex;margin-bottom:.5rem;padding:.2rem}.status-label{align-items:center;display:flex;font-size:.85rem;font-weight:700}");var g=function(a){var i=a.items,l=a.mode,d=a.exclude,m=a.onSelection,f=a.onDelete,g=a.onCloseSuggestion,p=a.disableInput,h=t(i.map((function(e){return{value:e,selected:!1}}))),v=h[0],b=h[1];n((function(){d&&b(v.map((function(e){return Object.assign({},e,{selected:d.indexOf(e.value)>-1})})))}),[null==d?void 0:d.length]);var w=r((function(){return`${v.filter((function(e){return e.selected})).length} out of ${v.length} selected`}),[JSON.stringify(v)]);return v.length?e.createElement("div",{className:"suggestions-wrapper"},e.createElement("span",{className:"sug-header"},e.createElement("span",{className:"status-label"},w),e.createElement("button",{onClick:g,className:"close-button"},e.createElement(u,null))),e.createElement("ul",{className:"suggestions"},v.map((function(t,n){return e.createElement("li",{key:n,onClick:function(){t.selected?f(t.value):m(t.value)},className:s({suggestion:!0,disabled:!t.selected&&p,selected:t.selected,list:l===o.LIST_MODE})},e.createElement("span",{style:{paddingLeft:"1rem"},className:"suggestion"},t.value),t.selected&&e.createElement("span",{className:"check-icon-wrapper"},e.createElement(c,null)))})))):null};f(".nav-bar-wrapper{align-items:center;display:flex;margin-top:1rem;padding:.2rem 0;width:100%}.nav-bar-controls{align-items:center;display:flex;justify-content:flex-end;margin:0;padding:0;width:30%}.nav-bar-message{font-size:.75rem;font-style:italic;font-weight:500;max-width:65%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.nav-bar-control{align-items:center;background:none;border:0;cursor:pointer;display:flex;height:1rem;justify-content:center;margin:0 .25rem;width:1rem;filter:opacity(var(--control-opacity));pointer-events:var(--pointer-events)}");var p=e.memo((function(t){var n=t.message,a=t.onClear,i=t.onShowSuggestions,o=t.disableTrash,l=r((function(){return o?{"--control-opacity":.5,"--pointer-events":"none"}:{}}),[o]);return e.createElement("nav",{className:"nav-bar-wrapper"},e.createElement("span",{className:"nav-bar-message"},n),e.createElement("ul",{className:"nav-bar-controls"},e.createElement("li",{onClick:a,className:"nav-bar-control",style:l},e.createElement(d,null)),e.createElement("li",{onClick:i,className:"nav-bar-control"},e.createElement(m,null))))}),(function(e,t){return e.message===t.message&&e.disableTrash===t.disableTrash}));f(".edit-txt-wrapper{display:flex;align-items:center;justify-content:flex-start;outline:0;padding-left:.2rem}@keyframes blink{0%,to{background:#000}50%{background:transparent}}.edit-text{user-select:none;min-width:5px;font-size:.85rem;order:1;min-width:4px;padding:.25rem .2rem .25rem .1rem}.blink,.edit-text{align-items:center;display:flex}.blink{animation:blink;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:step-end;font-size:1rem;font-weight:500;text-align:left;justify-content:flex-start;width:1px;height:18px;margin-left:1px;order:var(--blink-order);visibility:var(--blink-visibility)}.char{order:var(--char-order)}.char-wrapper{align-items:center;display:flex}");var h=function(t){var n=t.hasFocus,a=t.order,i=r((function(){return{"--blink-visibility":n?"visibility":"hidden","--blink-order":a}}),[n,a]);return e.createElement("span",{className:"blink",style:i})};f(".placeholder-wrapper{order:2}.placeholder-wrapper:hover{cursor:text}.placeholder{font-style:italic;font-size:.85rem;opacity:.65}");var v=function(t){return e.createElement("div",{onClick:t.onClick,onBlur:t.onBlr,className:"placeholder-wrapper"},e.createElement("span",{className:"placeholder"},t.value),t.children)},b=e.forwardRef((function(o,l){var s=o.value,c=o.onSaveEdit,u=o.cursorSize;void 0===u&&(u="SMALL");var d=o.onEditStatusChanged,m=o.placeholder;void 0===m&&(m="Enter a value...");var f=o.mode,g=o.editable;void 0===g&&(g=!1);var p=o.maxLength;void 0===p&&(p=20);var b=t(s),w=b[0],x=b[1],y=t(!1),E=y[0],k=y[1],S=t(),N=S[0],C=S[1],I=a((function(){!N&&g&&C(!0)}),[N]),T=a((function(){C(!1)}),[E,w]),L=t(s.length-1),j=L[0],O=L[1],D=i(!0),z=i(!1),M=a((function(e){var t=e.key,n=w.length;if(e.ctrlKey&&"a"===t)k(!0);else if(1===t.length&&n<p){E&&(x(""),E&&k(!1));var r=" "===t?String.fromCharCode(160):t;D.current?x((function(e){return`${e}${r}`})):(x((function(e){var t=[].concat(e);return t.splice(j+1,0,r),t.join("")})),O(j+1))}else switch(t){case"Enter":w&&(c&&c(w.trim()),d(!1),"INPUT"===f&&x(""));break;case"Escape":C(!1),E&&k(!1),d(!1);break;case"Backspace":E?x(""):(x((function(e){return[].concat(e).filter((function(e,t){return t!==j})).join("")})),j>=0&&O(j-1));break;case"Home":case"End":O("Home"===t?-1:n-1),D.current="Home"===t,z.current="Home"===t,E&&k(!1);break;case"ArrowLeft":case"ArrowRight":"ArrowLeft"===t&&j>=0?O(j-1):"ArrowRight"===t&&j<n-1&&O(j+1),j>0&&j<n?(z.current=!1,D.current=!1):(z.current=!0,D.current=!1),E&&k(!1);break;case"Delete":E?x(""):n&&j<n&&x((function(e){return[].concat(e).filter((function(e,t){return t!==j+1})).join("")}))}}),[w,N,E,j]);n((function(){null!=N&&(N?d(!0):(d(!1),k(!1),O(w.length-1)))}),[N]),n((function(){w.length?D.current&&O(w.length-1):(k(!1),O(-1))}),[w]);var B=r((function(){return j<0?"front":(w.length,"back")}),[j,w]),A=r((function(){return j<0||N?e.createElement(h,{hasFocus:N,selectAll:E,cursorSize:u,order:0}):null}),[N,E,j,w]),R=r((function(){return E?{background:"#ccc",color:"#000"}:{background:"transparent"}}),[E]),F=r((function(){return{order:"front"===B?2:1}}),[B]);return e.createElement("div",{className:"edit-txt-wrapper",onBlur:T,onKeyDown:M,tabIndex:0,onFocus:I,ref:l},"INPUT"===f&&!w.length&&e.createElement(v,{value:m,onClick:I,onBlr:T}),e.createElement("span",{className:"edit-text",style:R},j<0&&A,[].concat(w).map((function(t,n){return e.createElement("span",{key:n,className:"char-wrapper"},e.createElement("span",{style:F},t),n===j&&e.createElement(h,{hasFocus:N,selectAll:E,cursorSize:u,order:n+1}))}))))}));f("@keyframes animate-blink{0%,to{color:transparent}50%{color:#000}}.tag,.tag-content-wrapper{align-items:center;display:flex}.tag{background:var(--tag-bg-color);border-radius:4px;border:1px solid var(--tag-border-color);font-size:1rem;margin:.25rem;outline:0;padding:.25rem}.close-icon-wrapper{align-items:center;background:#494949;border-radius:50%;color:#fff;cursor:pointer;display:flex;height:1rem;justify-content:center;margin-left:auto;margin-right:.25rem;width:1rem}");var w=function(n){var o=n.name,l=n.id,s=n.onDelete,c=n.readOnly,d=(n.hide,n.onSaveEdit),m=a((function(e){l&&d&&d(l,e)}),[]),f=t(!1),g=f[0],p=f[1],h=a((function(e){p(e),e?v.current&&v.current.focus():v.current&&v.current.blur()}),[]),v=i(null),w=r((function(){return{"--tag-bg-color":g?"#FFF":"rgba(248,222,126,1.0)","--tag-border-color":g?"#494949":"transparent"}}),[g]);return e.createElement("li",{className:"tag",style:w,tabIndex:0},e.createElement("div",null,e.createElement(b,{value:o,onSaveEdit:m,onEditStatusChanged:h,ref:v,mode:"EDIT",editable:!c})),!c&&e.createElement("span",{onClick:function(){return l&&s&&s(l)},tabIndex:0,className:"close-icon-wrapper"},e.createElement(u,null)))};f(".tags-input-wrapper{align-self:center;margin-bottom:.5rem;margin-top:.5rem}");var x=function(t){var n=t.onInput,r=t.inputRef,a=t.onStatusChange;return e.createElement("div",{className:"tags-input-wrapper"},e.createElement(b,{value:"",onSaveEdit:function(e){n(e)},onEditStatusChanged:a,showCursor:!0,ref:r,mode:"INPUT",editable:!0}))};f(".tags-wrapper{background:#f5f5f5;border-radius:4px;box-shadow:inset 0 0 10px rgba(0,0,0,.1);display:flex;flex-wrap:wrap;list-style:none;margin:0;padding:1rem 1rem .5rem;position:relative;transition:height .3s ease-out;user-select:none;width:450px}");var y=function(t){var n=t.disableInput,r=t.inputRef,a=t.items,i=t.onClearTags,o=t.onDelete,l=t.onInput,s=t.onSaveEdit,c=t.onToggleSuggestions,u=t.readOnly,d=t.validationMessage,m=t.onInputStatusChanged;return e.createElement("ul",{className:"tags-wrapper"},a.map((function(t){return e.createElement(w,Object.assign({},t,{key:t.id,onDelete:o,onSaveEdit:s}))})),!n&&e.createElement(x,{onInput:l,inputRef:r,onStatusChange:m}),!u&&e.createElement(p,{onShowSuggestions:c,message:d,onClear:i,disableTrash:!a.length}))};f(".main-wrapper{display:flex;flex-direction:column;position:relative;transition:max-height .5s cubic-bezier(0,1,0,1);max-height:600px}svg{width:100%;height:100%}");var E=function(l){var s=l.items,c=l.maxTags;void 0===c&&(c=5);var u=l.allowDuplicates;void 0===u&&(u=!1);var d=l.allowParsing;void 0===d&&(d={delimiter:","});var m=l.readOnly;void 0===m&&(m=!1);var f=l.suggestions;void 0===f&&(f=[]);var p=l.suggestionMode;void 0===p&&(p=o.LIST_MODE);var h=l.placeholder;void 0===h&&(h="Choose an option ...");var v=t([]),b=v[0],w=v[1],x=t(""),E=x[0],k=x[1],S=t([]),N=S[0],C=S[1],I=t(!1),T=I[0],L=I[1],j=t(h),O=j[0],D=j[1],z=i(null),M=r((function(){return b.length===c}),[b.length]),B=r((function(){return!u&&b.some((function(e){return e.name===E}))}),[E,b.length]),A=r((function(){return M||m}),[M,m]),R=r((function(){return!M&&!B}),[M,B]),F=a((function(e){return k(e)}),[]),H=a((function(e){var t=b.find((function(t){return t.id===e}));w((function(t){return t.filter((function(t){return t.id!==e}))})),t&&C((function(e){return e.filter((function(e){return e!==t.name}))})),D(h),z.current&&z.current.focus()}),[b.length]),P=a((function(){return L(!T)}),[T]),W=r((function(){return T&&!m}),[T,m]),$=a((function(){w([]),C([]),D(h),z.current&&z.current.focus()}),[]),_=a((function(e,t){var n=b.find((function(t){return t.id===e}));f.indexOf(t)>-1&&N.every((function(e){return e!==t}))&&C((function(e){return e.concat(t)})),n&&f.some((function(e){return e===n.name}))&&N.some((function(e){return e===n.name}))&&C((function(e){return e.filter((function(e){return e!==n.name}))})),w((function(n){return n.map((function(n){return n.id===e?Object.assign({},n,{name:t,value:t}):n}))})),z.current&&z.current.focus()}),[N]),U=a((function(e){C((function(t){return null==t?void 0:t.concat(e)})),k(e)}),[]),K=a((function(e){z.current&&e&&z.current.focus()}),[]);return n((function(){M?D("You have reached the maximum tags allowed."):B&&D("You already have that tag.")}),[M,B]),n((function(){if(R&&E){var e=E.split(d.delimiter).slice(0,Math.max(0,c-b.length)).map((function(e){return{name:e,value:e,id:Math.random().toString(16).slice(2),order:b.length+1}}));w((function(t){return t.concat(e)})),D(""),f.some((function(e){return e===E}))&&C((function(e){return e.concat(E)}))}E&&k("")}),[E]),n((function(){var e;e=s.map((function(e,t){return Object.assign({},e,{id:Math.random().toString(16).slice(2),readOnly:m,order:t})})).slice(0,c),w(e),C(s.map((function(e){return e.name})))}),[]),e.createElement("div",{className:"main-wrapper"},e.createElement(y,{disableInput:A,inputRef:z,items:b,onClearTags:$,onDelete:H,onInput:F,onSaveEdit:_,onToggleSuggestions:P,readOnly:m,validationMessage:O,onInputStatusChanged:K}),W&&e.createElement(g,{disableInput:A,exclude:N,items:f,mode:p,onCloseSuggestion:P,onDelete:function(e){var t=b.find((function(t){return t.name===e}));null!=t&&t.id&&H(t.id)},onSelection:U}))};export{E as ReactTagz};
